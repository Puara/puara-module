<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>puara-module documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "ayu";
            const default_dark_theme = "ayu";
            window.path_to_searchindex_js = "searchindex-68ef5567.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-18862a05.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">puara-module documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="puara-module"><a class="header" href="#puara-module">Puara Module</a></h1>
<p><strong>Société des Arts Technologiques (SAT)</strong><br><strong>Input Devices and Music Interaction Laboratory (IDMIL)</strong></p>
<hr>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Puara Module is a library for ESP32 boards that provides a simplified interface for managing WiFi, a web server, and a filesystem. It facilitates the creation of distributed interactive systems, networked controllers, and similar applications, allowing users to focus on prototyping the rest of their system.</p>
<hr>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>This documentation is divided into two main sections:</p>
<h3 id="1-building-puara-module-templatesexamples"><a class="header" href="#1-building-puara-module-templatesexamples">1. Building Puara Module Templates/Examples</a></h3>
<p>Choose your preferred development environment. We offer almost identical templates for both Arduino IDE and PlatformIO.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Environment</th><th>Recommended For</th></tr>
</thead>
<tbody>
<tr><td><a href="#puara-module-for-arduino">Arduino IDE</a></td><td>Beginner to intermediate programmers</td></tr>
<tr><td><a href="#puara-module-template-module-manager">PlatformIO</a></td><td>Intermediate to advanced programmers, or users wanting more control</td></tr>
</tbody>
</table>
</div>
<p>Once your project is running, use the <a href="#browser-pages">Browser Pages</a> to configure your device’s network settings and custom variables.</p>
<h3 id="2-developer-reference"><a class="header" href="#2-developer-reference">2. Developer Reference</a></h3>
<p>Technical documentation for understanding and extending the codebase:</p>
<ul>
<li><a href="#puara-api-documentation">Puara API</a> - Main <code>Puara</code> object and its methods</li>
<li><a href="#filesystem-1">Filesystem</a> - LittleFS vs SPIFFS configuration</li>
<li><a href="#web-server-1">Web Server</a> - Integrated web server for device configuration</li>
<li><a href="#wifi-considerations">WiFi</a> - WiFi connection management</li>
<li><a href="#serial-and-debug-logging">Serial and Debug Logging</a> - Serial communication and debug output</li>
<li><a href="#mdns">mDNS</a> - Local network device discovery</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="puara-module-for-arduino"><a class="header" href="#puara-module-for-arduino">Puara Module for Arduino</a></h1>
<h2 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h2>
<p>⚠️ Download <a href="https://www.arduino.cc/en/software/">Arduino 2.0 IDE</a> for build/upload of program.</p>
<p>⚠️ Install <a href="https://github.com/earlephilhower/arduino-littlefs-upload">Arduino-LittleFS-Upload</a> for filesystem uploading.</p>
<p>⚠️ ESP32 board library: Open <strong>Boards Manager</strong> icon in Arduino 2.0 IDE, type <strong>esp32</strong> in the Boards Manager <strong>search bar</strong> and install <em>esp32</em> by <em>Espressif Systems</em>.</p>
<p>⚠️ Partition size options: Select any options that offer minimal partition before building the program. These options vary depending on board capabilities and can be found here: <code>/Tools/Partition Scheme/</code>. A common option is <code>Minimal SPIFFS</code> such as: <code>/Tools/Partition Scheme/Minimal SPIFFS</code>.
Warning: some boards simply do not have such options.</p>
<h2 id="how-to-use"><a class="header" href="#how-to-use">How to Use</a></h2>
<ol>
<li>
<p><strong>Install Arduino 2.0 IDE</strong></p>
</li>
<li>
<p><strong>Download the <code>puara-module</code> library from Library Manager</strong></p>
</li>
<li>
<p><strong>Open a puara template in Arduino IDE</strong>: Open Arduino IDE, go to File/Examples/puara-module/ and select the template of your choice.</p>
</li>
<li>
<p><strong>Configure the board</strong>: Ensure the <code>board</code> and <code>port</code> variables in the IDE match your board.</p>
</li>
<li>
<p><strong>Edit partition scheme</strong>: Allow more space for your programs. Go to:</p>
</li>
</ol>
<ul>
<li>Tools/Partition Scheme/
Select <code>Minimal Spiffs</code> or similar option. Different boards have different possibilities but generally the <code>Minimal Spiffs:...</code> option should be present.</li>
</ul>
<ol start="6">
<li>
<p><strong>Edit the template</strong>: You are now ready to edit the template according to your board/needs.</p>
</li>
<li>
<p><strong>Edit the filesystem</strong>: To modify network configurations, add or modify the available variables in the settings, go to:</p>
</li>
</ol>
<ul>
<li><code>Sketch/Show Sketch Folder</code> which will open your local project folder</li>
<li>Enter <code>data/</code> folder:
<ul>
<li>Modify network name (SSID) and password (PSK) configurations in config.json;</li>
<li>Modify/Add variables in settings.json;</li>
<li>Save your modifications.</li>
</ul>
</li>
</ul>
<ol start="8">
<li><strong>Build and upload the filesystem and firmware</strong>: Once ready, you can:</li>
</ol>
<ul>
<li>Use Arduino IDE to build and upload the firmware to your board.</li>
<li>Use <a href="https://github.com/earlephilhower/arduino-littlefs-upload">Arduino-LittleFS-Upload</a> for the filesystem uploading:
<code>[Ctrl]</code> + <code>[Shift]</code> + <code>[P]</code>, then “<code>Upload LittleFS to Pico/ESP8266/ESP32</code>”.</li>
</ul>
<p>On macOS, press <code>[⌘]</code> + <code>[Shift]</code> + <code>[P]</code> to open the Command Palette in the Arduino IDE, then “<code>Upload LittleFS to Pico/ESP8266/ESP32</code>”.</p>
<ol start="9">
<li><strong>Test your IoT device and validate communication between systems</strong>: At this point your board should either connect to your specified network if it can find it. In either case, if it does or doesn’t connect, your board will create an Access Point you can connect to directly. Use the board’s IP address to communicate with it when needed. More details below.</li>
</ol>
<blockquote>
<h5 id="-important-detail-for-users"><a class="header" href="#-important-detail-for-users">⚠️ <strong>Important detail for users</strong></a></h5>
<p>Most Arduino or embedded projects only upload the <strong>code</strong> that runs on the device. However, in this project, the device also needs a <strong>filesystem</strong> to store important data, such as configuration files, templates, or other resources that the code relies on. These two parts—<strong>code</strong> and <strong>filesystem</strong>—serve different purposes and must be built and uploaded separately.
The <strong>executable code</strong> tells the device what to do, includes the logic, instructions, and behavior of the device such as how to read a sensor, process data, or send information over Wi-Fi.
The <strong>filesystem</strong> is like a “hard drive” for the device, where additional files are stored and can include configuration files, templates, or other resources that the code needs to function properly. In our approach, the filesystem stores a JSON file with user settings for the network configurations and some global variables that can be modified through the browser without needing to reflash the whole system.</p>
</blockquote>
<hr>
<h2 id="how-it-works"><a class="header" href="#how-it-works">How It Works</a></h2>
<p>⚠️
<strong>Every template related to Puara Module has a different set of options but they all generally respect the following explanation.</strong>
If needed, the following sections are detailed more thoroughly in the <a href="https://puara.github.io/puara-module/introduction.html#2-developer-reference">Puara Module Book</a></p>
<h3 id="1-establishing-wifi"><a class="header" href="#1-establishing-wifi">1. Establishing WiFi</a></h3>
<p>When initiating the program, the module manager will try to connect to the WiFi Network (SSID) defined in <code>config.json</code>.
The <code>puara-module</code> supports three modes of operation:</p>
<ol>
<li>
<p><strong>Station - Access Point (STA-AP) Mode</strong> (Default):</p>
<ul>
<li>The device connects to an existing WiFi network (station).</li>
<li>The device creates its own WiFi network (access point).</li>
<li>User has two ways to communicate with the board.</li>
</ul>
</li>
<li>
<p><strong>Access Point (AP) Mode</strong>:</p>
<ul>
<li>The device does not connect to an existing WiFi network.</li>
<li>The device creates its own WiFi network (access point).</li>
</ul>
</li>
<li>
<p><strong>Station (STA) Mode</strong>:</p>
<ul>
<li>The device connects to an existing WiFi network.</li>
<li>The Access Point is turned off with <code>persistent_AP=0</code></li>
<li>Useful to limit WiFi pollution and secure the device.</li>
</ul>
</li>
</ol>
<h3 id="2-making-the-web-server-accessible"><a class="header" href="#2-making-the-web-server-accessible">2. Making the Web Server Accessible</a></h3>
<p>Browser-accessible pages available for configuring, scanning, and managing settings on your device are made available through Puara Module.</p>
<p>Once the web server is running, you can access it in two ways:</p>
<ol>
<li>
<p><strong>Via IP Address</strong>: Navigate to the device’s IP address in your web browser (e.g., <code>http://192.168.4.1</code> for AP mode, or the assigned IP in STA/STA-AP modes which can be retrieved using <code>puara.staIP()</code>).</p>
</li>
<li>
<p><strong>Via mDNS Hostname</strong>: If mDNS is enabled, you can access the device using its hostname (e.g., <code>http://your-device-name.local</code>). Default <code>config.json</code>values enable mDNS with the Puara_001, and browser is accessible with <code>puara_001.local</code>.</p>
</li>
</ol>
<p>Using the web browser, users can modify variables that keep their value after reboot/shutdown of device without needing to rebuild/upload their program.
Access these values in the program by using:</p>
<pre><code class="language-cpp">// For text fields
std::string my_string = puara.getVarText("variable_name");

// For number fields (all numbers are `doubles` -- see JSON documentation for explanation)
double my_number = puara.getVarNumber("variable_name");
</code></pre>
<h4 id="making-of-custom-variables-in-settingsjson"><a class="header" href="#making-of-custom-variables-in-settingsjson">Making of Custom Variables in <code>settings.json</code></a></h4>
<p>The <code>/data/settings.json</code> file stores custom application settings as an array of name-value pairs:</p>
<pre><code class="language-json">{
    "settings": [
        {
            "name": "user_defined_text",
            "value": "user defined value"
        },
        {
            "name": "variable3",
            "value": 12.345
        }
    ]
}
</code></pre>
<p>User may add/modify fields in this file and then upload the new filesystem in order to have a more custom device.</p>
<hr>
<p>For more detailed documentation, please refer to the Puara Module <a href="https://puara.github.io/puara-module/introduction.html#2-developer-reference">developer documents</a></p>
<hr>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p>The <a href="https://github.com/Puara/puara-arduino">puara-arduino</a> repository includes five Arduino sketches that demonstrate different use cases and functionalities.
All examples are identical to the PlatformIO templates available in <a href="https://github.com/Puara/puara-module-templates">puara-module-templates</a>.</p>
<p>Each example includes a <code>data/</code> folder containing configuration files (<code>config.json</code>, <code>settings.json</code>) and web interface files (HTML and CSS).</p>
<p>⚠️ <strong>After building and uploading the firmware to your board, you must also upload the filesystem</strong>.</p>
<hr>
<h3 id="1-basic-example"><a class="header" href="#1-basic-example">1. Basic Example</a></h3>
<p><strong>File</strong>: <code>examples/basic/basic.ino</code></p>
<p>A minimal example demonstrating core Puara Module functionality. This example:</p>
<ul>
<li>Initializes the Puara module manager</li>
<li>Reads custom settings from the JSON configuration files</li>
<li>Outputs dummy sensor data to the serial monitor</li>
<li>Demonstrates how to access custom configuration variables using <code>getVarText()</code> and <code>getVarNumber()</code></li>
</ul>
<p>This is the best starting point for learning how to use the Puara framework.</p>
<hr>
<h3 id="2-osc-send-example"><a class="header" href="#2-osc-send-example">2. OSC-Send Example</a></h3>
<p><strong>File</strong>: <code>examples/OSC-Send/OSC-Send.ino</code></p>
<p>Demonstrates how to set up a basic OSC transmitter. This example:</p>
<ul>
<li>Sends dummy sensor data as OSC messages to a specified IP address and port</li>
<li>Configurable OSC IP/port via the web interface without rebuilding/reflashing</li>
<li>Shows how to use the <code>onSettingsChanged()</code> callback to update parameters dynamically</li>
<li>Includes example code for reading analog sensors and digital signals</li>
</ul>
<p><strong>Note</strong>: Please refer to <a href="https://github.com/CNMAT/OSC">CNMAT’s OSC repository</a> on GitHub for more details on OSC.</p>
<hr>
<h3 id="3-osc-receive-example"><a class="header" href="#3-osc-receive-example">3. OSC-Receive Example</a></h3>
<p><strong>File</strong>: <code>examples/OSC-Receive/OSC-Receive.ino</code></p>
<p>Demonstrates how to receive and process OSC messages. This example:</p>
<ul>
<li>Listens for incoming OSC messages on a configurable UDP port</li>
<li>Parses OSC messages and extracts data from them</li>
<li>Demonstrates example processing of float values to control device outputs (e.g., LED brightness)</li>
<li>Shows how to use the <code>onSettingsChanged()</code> callback for dynamic configuration</li>
</ul>
<p>The example expects a float between [0,1] on the OSC address <code>/led/brightness</code> with the format: <code>/led/brightness f 0.34</code></p>
<p><strong>Note</strong>: Please refer to <a href="https://github.com/CNMAT/OSC">CNMAT’s OSC repository</a> on GitHub for more details on OSC.</p>
<hr>
<h3 id="4-osc-duplex-example"><a class="header" href="#4-osc-duplex-example">4. OSC-Duplex Example</a></h3>
<p><strong>File</strong>: <code>examples/OSC-Duplex/OSC-Duplex.ino</code></p>
<p>Combines both OSC-Send and OSC-Receive functionality in a single sketch. This example:</p>
<ul>
<li>Sends dummy sensor data to a remote OSC address</li>
<li>Simultaneously receives OSC messages from remote sources</li>
<li>Demonstrates full duplex OSC communication patterns</li>
<li>Useful for bidirectional device communication scenarios</li>
</ul>
<p><strong>Note</strong>: Please refer to <a href="https://github.com/CNMAT/OSC">CNMAT’s OSC repository</a> on GitHub for more details on OSC.</p>
<hr>
<h3 id="5-ble-advertising-example"><a class="header" href="#5-ble-advertising-example">5. BLE Advertising Example</a></h3>
<p><strong>File</strong>: <code>examples/ble-advertising/ble-advertising.ino</code></p>
<p>Demonstrates BLE (Bluetooth Low Energy) advertising without requiring device connections. This template:</p>
<ul>
<li>Uses BLE advertising to broadcast device information</li>
<li>Encodes sensor data as CBOR payloads in BLE manufacturer data packets</li>
<li>Broadcasts at configurable frequency (default 50Hz)</li>
<li>Works seamlessly with the <a href="https://gitlab.com/sat-mtl/collaborations/2024-iot/ble-cbor-to-osc">BLE-CBOR-to-OSC script</a></li>
</ul>
<p><strong>Key Features</strong>:</p>
<ul>
<li><strong>Broadcast without connection</strong>: Receive data from hundreds of BLE devices simultaneously without establishing individual connections</li>
<li><strong>Range</strong>: Tested with ~120 devices in a 0-150 metre range with updates every 500ms</li>
<li><strong>CBOR encoding</strong>: Efficient binary encoding for minimal payload</li>
<li><strong>Device identification</strong>: Each device can be assigned a unique ID via <code>config.json</code> for easy tracking</li>
</ul>
<p><strong>Use Case</strong>: Ideal for IoT scenarios where you need to monitor many sensor devices simultaneously (e.g., distributed sensor networks, interactive installations) and is well-suited for lower data-rate transmission.</p>
<h4 id="getting-started-with-ble-advertising"><a class="header" href="#getting-started-with-ble-advertising">Getting Started with BLE Advertising</a></h4>
<ol>
<li><strong>Build and Upload</strong>: Build and upload the firmware to your ESP32 board</li>
<li><strong>Configure Device</strong>: Optionally modify the device name and ID in <code>config.json</code></li>
<li><strong>Upload Filesystem</strong>: Upload the data folder using the LittleFS upload tool</li>
<li><strong>Run BLE-CBOR-to-OSC Script</strong>:
<ul>
<li>Clone the <a href="https://gitlab.com/sat-mtl/collaborations/2024-iot/ble-cbor-to-osc">BLE-CBOR-to-OSC repository</a></li>
<li>Create a Python virtual environment : <code>python -m venv venv</code></li>
<li>Activate the venv : <code>source ./venv/bin/activate</code></li>
<li>Install Python dependencies: <code>pip install -r requirements.txt</code></li>
<li>Run: <code>python ble-cbor-to-osc.py</code></li>
</ul>
</li>
<li><strong>Receive OSC Messages</strong>: The script forwards BLE advertising data as OSC messages to <code>127.0.0.1:9001</code> (configurable)</li>
</ol>
<h4 id="ble-configuration"><a class="header" href="#ble-configuration">BLE Configuration</a></h4>
<p>You can customize the BLE advertising behavior:</p>
<ul>
<li><strong>Frequency</strong>: Modify <code>target_frequency</code> variable (default 50Hz)</li>
<li><strong>Sensor Data</strong>: Replace dummy <code>sensor1</code> and <code>sensor2</code> with actual pin readings</li>
</ul>
<p>For more information, see the <a href="https://gitlab.com/sat-mtl/collaborations/2024-iot/ble-cbor-to-osc">BLE-CBOR-to-OSC script documentation</a>.</p>
<hr><div style="break-before: page; page-break-before: always;"></div>
<h1 id="puara-module-template-module-manager"><a class="header" href="#puara-module-template-module-manager">Puara Module Template (Module Manager)</a></h1>
<p>This <a href="https://github.com/Puara/puara-module-templates">repository</a> contains several templates to be used as a base to create devices that can be controlled over the network.</p>
<h2 id="how-to-use-puara-module-templates-with-platformio"><a class="header" href="#how-to-use-puara-module-templates-with-platformio">How to Use Puara Module Templates with PlatformIO</a></h2>
<ol>
<li>
<p><strong>Install VSCode and PlatformIO</strong>: Use <a href="https://code.visualstudio.com/">Visual Studio Code</a> as code editor with the <a href="https://platformio.org/install/ide?install=vscode">PlatformIO</a> IDE extension.</p>
</li>
<li>
<p><strong>Clone the <code>puara-module-templates</code> repository locally</strong>: <code>git clone https://github.com/Puara/puara-module-templates.git</code></p>
</li>
<li>
<p><strong>Open a puara template in VS Code</strong>: Open VS Code, and select the platformIO extension on the left side. This will open the <code>PLATFORMIO</code> panel. From there select “Pick a folder”, and navigate to one of the <code>puara-module-templates</code> subfolders, e.g., <code>puara-module-templates/basic/</code> (see below for a list of available templates). Click the “Select Folder” button. Wait for a bit while PlatformIO configures your project.</p>
</li>
</ol>
<p align="center">
  <img width="450" src="https://github.com/user-attachments/assets/1d87273a-c3e3-4d5b-890f-6fca498f09b5">
</p>

<ol start="4">
<li>
<p><strong>Configure the board</strong>: Ensure the <code>board</code> variable in the <code>platformio.ini</code> file matches your board’s name. If needed you can find valid board IDs in <a href="https://docs.platformio.org/en/latest/boards/index.html#boards">Boards</a> catalog, <a href="https://registry.platformio.org/search?t=platform">Boards Explorer</a> or by using the <a href="https://docs.platformio.org/en/latest/core/userguide/cmd_boards.html#cmd-boards">pio boards</a> terminal command.</p>
</li>
<li>
<p><strong>Edit the template</strong>: You are now ready to edit the template according to your board/needs.</p>
</li>
<li>
<p><strong>Build and upload the filesystem and firmware</strong>: Once ready, you can use PlatformIO to build and upload the filesystem and firmware to your board. You can access the <code>PLATFORMIO</code> Project Tasks by clicking on the extension button on the left. Make sure you upload both the filesystem (<code>Build</code>/<code>Upload Filesystem Image</code> under the <code>Platform</code> icon) and the firmware (<code>Build</code>/<code>Upload</code> under the <code>General</code> icon).</p>
</li>
</ol>
<p align="center">
  <img width="150" src="https://github.com/user-attachments/assets/d0254aa6-c1f2-400f-97c6-873a5597637b">
</p>

<blockquote>
<h4 id="-important-detail-for-users-1"><a class="header" href="#-important-detail-for-users-1">⚠️ <strong>Important detail for users</strong></a></h4>
<p>Most embedded projects only upload the <strong>code</strong> that runs on the device. However, in this project, the device also needs a <strong>filesystem</strong> to store important data, such as configuration files, templates, or other resources that the code relies on. These two parts—<strong>code</strong> and <strong>filesystem</strong>—serve different purposes and must be built and uploaded separately.
The <strong>executable code</strong> tells the device what to do, includes the logic, instructions, and behavior of the device such as how to read a sensor, process data, or send information over Wi-Fi.
The <strong>filesystem</strong> is like a “hard drive” for the device, where additional files are stored and can include configuration files, templates, or other resources that the code needs to function properly. In our approach, the filesystem stores a JSON file with user settings for the network configurations and some global variables that can be modified through the browser without needing to reflash the whole system.</p>
</blockquote>
<hr>
<h2 id="how-it-works-1"><a class="header" href="#how-it-works-1">How It Works</a></h2>
<p><strong>Every template related to Puara Module has a different set of options but they all generally respect the following explanation.</strong>
The following sections are detailed more thoroughly in the <a href="https://puara.github.io/puara-module/introduction.html">Puara Module Book</a>.</p>
<h3 id="1-establishing-wifi-1"><a class="header" href="#1-establishing-wifi-1">1. Establishing WiFi</a></h3>
<p>When initiating the program, the module manager will try to connect to the WiFi Network (SSID) defined in <code>config.json</code>.
The <code>puara-module</code> supports three modes of operation:</p>
<ol>
<li>
<p><strong>Station - Access Point (STA-AP) Mode</strong> (Default):</p>
<ul>
<li>The device connects to an existing WiFi network (station).</li>
<li>The device creates its own WiFi network (access point).</li>
<li>User has two ways to communicate with the board.</li>
</ul>
</li>
<li>
<p><strong>Access Point (AP) Mode</strong>:</p>
<ul>
<li>The device does not connect to an existing WiFi network.</li>
<li>The device creates its own WiFi network (access point).</li>
</ul>
</li>
<li>
<p><strong>Station (STA) Mode</strong>:</p>
<ul>
<li>The device connects to an existing WiFi network.</li>
<li>The Access Point is turned off with <code>persistent_AP=0</code></li>
<li>Useful to limit WiFi pollution and secure the device.</li>
</ul>
</li>
</ol>
<h3 id="2-making-the-web-server-accessible-1"><a class="header" href="#2-making-the-web-server-accessible-1">2. Making the Web Server Accessible</a></h3>
<p>Browser-accessible pages available for configuring, scanning, and managing settings on your device are made available through Puara Module.</p>
<p>Once the web server is running, you can access it in two ways:</p>
<ol>
<li>
<p><strong>Via IP Address</strong>: Navigate to the device’s IP address in your web browser (e.g., <code>http://192.168.4.1</code> for AP mode, or the assigned IP in STA/STA-AP modes which can be retrieved using <code>puara.staIP()</code>).</p>
</li>
<li>
<p><strong>Via mDNS Hostname</strong>: If mDNS is enabled, you can access the device using its hostname (e.g., <code>http://your-device-name.local</code>). Default <code>config.json</code>values enable mDNS with the Puara_001, and browser is accessible with <code>puara_001.local</code>.</p>
</li>
</ol>
<p>Using the web browser, users can modify variables that keep their value after reboot/shutdown of device without needing to rebuild/upload their program.
Access these values in the program by using:</p>
<pre><code class="language-cpp">// For text fields
std::string my_string = puara.getVarText("variable_name");

// For number fields (all numbers are `doubles` -- see JSON documentation for explanation)
double my_number = puara.getVarNumber("variable_name");
</code></pre>
<h4 id="making-of-custom-variables-in-settingsjson-1"><a class="header" href="#making-of-custom-variables-in-settingsjson-1">Making of Custom Variables in <code>settings.json</code></a></h4>
<p>The <code>/data/settings.json</code> file stores custom application settings as an array of name-value pairs:</p>
<pre><code class="language-json">{
    "settings": [
        {
            "name": "user_defined_text",
            "value": "user defined value"
        },
        {
            "name": "variable3",
            "value": 12.345
        }
    ]
}
</code></pre>
<p>User may add/modify fields in this file and then upload the new filesystem in order to have a more custom device.</p>
<hr>
<h2 id="available-templates"><a class="header" href="#available-templates">Available Templates</a></h2>
<p>The <a href="https://github.com/Puara/puara-module-templates">puara-module-templates</a> repository includes multiple examples demonstrating different use cases and functionalities.
Each example includes a <code>data/</code> folder containing configuration files (<code>config.json</code>, <code>settings.json</code>) and web interface files (HTML and CSS).</p>
<p>⚠️ <strong>After building and uploading the firmware to your board, you must also upload the filesystem</strong>.</p>
<hr>
<h3 id="1-basic-example-1"><a class="header" href="#1-basic-example-1">1. Basic Example</a></h3>
<p>A minimal example demonstrating core Puara Module functionality. This template:</p>
<ul>
<li>Initializes the Puara module manager</li>
<li>Reads custom settings from the JSON configuration files</li>
<li>Outputs dummy sensor data to the serial monitor</li>
<li>Demonstrates how to access custom configuration variables using <code>getVarText()</code> and <code>getVarNumber()</code></li>
</ul>
<p>This is the best starting point for learning how to use the Puara framework.</p>
<hr>
<h3 id="2-osc-send-example-1"><a class="header" href="#2-osc-send-example-1">2. OSC-Send Example</a></h3>
<p>Demonstrates how to set up a basic OSC transmitter. This template:</p>
<ul>
<li>Sends dummy sensor data as OSC messages to a specified IP address and port</li>
<li>Configurable OSC IP/port via the web interface without rebuilding/reflashing</li>
<li>Shows how to use the <code>onSettingsChanged()</code> callback to update parameters dynamically</li>
<li>Includes example code for reading analog sensors and digital signals</li>
</ul>
<p><strong>Note</strong>: Please refer to <a href="https://github.com/CNMAT/OSC">CNMAT’s OSC repository</a> on GitHub for more details on OSC.</p>
<hr>
<h3 id="3-osc-receive-example-1"><a class="header" href="#3-osc-receive-example-1">3. OSC-Receive Example</a></h3>
<p>Demonstrates how to receive and process OSC messages. This template:</p>
<ul>
<li>Listens for incoming OSC messages on a configurable UDP port</li>
<li>Parses OSC messages and extracts data from them</li>
<li>Demonstrates example processing of float values to control device outputs (e.g., LED brightness)</li>
<li>Shows how to use the <code>onSettingsChanged()</code> callback for dynamic configuration</li>
</ul>
<p>The example expects a float between [0,1] on the OSC address <code>/led/brightness</code> with the format: <code>/led/brightness f 0.34</code></p>
<p><strong>Note</strong>: Please refer to <a href="https://github.com/CNMAT/OSC">CNMAT’s OSC repository</a> on GitHub for more details on OSC.</p>
<hr>
<h3 id="4-osc-duplex-example-1"><a class="header" href="#4-osc-duplex-example-1">4. OSC-Duplex Example</a></h3>
<p>Combines both OSC-Send and OSC-Receive functionality in a single sketch. This template:</p>
<ul>
<li>Sends dummy sensor data to a remote OSC address</li>
<li>Simultaneously receives OSC messages from remote sources</li>
<li>Demonstrates full duplex OSC communication patterns</li>
<li>Useful for bidirectional device communication scenarios</li>
</ul>
<p><strong>Note</strong>: Please refer to <a href="https://github.com/CNMAT/OSC">CNMAT’s OSC repository</a> on GitHub for more details on OSC.</p>
<hr>
<h3 id="5-ble-advertising-example-1"><a class="header" href="#5-ble-advertising-example-1">5. BLE Advertising Example</a></h3>
<p>Demonstrates BLE (Bluetooth Low Energy) advertising without requiring device connections. This template:</p>
<ul>
<li>Uses BLE advertising to broadcast device information</li>
<li>Encodes sensor data as CBOR payloads in BLE manufacturer data packets</li>
<li>Broadcasts at configurable frequency (default 50Hz)</li>
<li>Works seamlessly with the <a href="https://gitlab.com/sat-mtl/collaborations/2024-iot/ble-cbor-to-osc">BLE-CBOR-to-OSC script</a></li>
</ul>
<p>For detailed setup instructions and configuration options, refer to the template’s README file.</p>
<hr>
<h3 id="6-basic-gestures-example"><a class="header" href="#6-basic-gestures-example">6. Basic Gestures Example</a></h3>
<p>Extends the basic template with gesture recognition capabilities using an IMU (Inertial Measurement Unit). This template:</p>
<ul>
<li>Demonstrates how to read and process IMU sensor data</li>
<li>Includes gesture detection logic</li>
<li>Shows integration with the Puara module system</li>
</ul>
<hr>
<h3 id="7-button-osc-example"><a class="header" href="#7-button-osc-example">7. Button OSC Example</a></h3>
<p>Demonstrates how to use button inputs with Puara gestures and OSC messaging. This template:</p>
<ul>
<li>Reads digital button inputs (simulated button in template can be replaced with a real button)</li>
<li>Shows event-driven communication patterns</li>
<li>Evaluates the user interaction with the button to determine if it is being held, pressed once, twice, or three times in a row, and so on</li>
<li>Sends button state changes as OSC messages</li>
</ul>
<hr>
<h3 id="8-libmapper-osc-example"><a class="header" href="#8-libmapper-osc-example">8. Libmapper OSC Example</a></h3>
<p>Demonstrates integration with libmapper, a distributed signal mapping system. This template:</p>
<ul>
<li>Uses libmapper to register signals that can be mapped remotely</li>
<li>Combines libmapper with OSC messaging capabilities</li>
<li>Shows how to use the Puara framework with advanced mapping scenarios</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="browser-pages"><a class="header" href="#browser-pages">Browser Pages</a></h1>
<p>This document explains the browser-accessible pages available for configuring, scanning, and managing settings on your device. For technical details on the web server itself, see <a href="#web-server-1">Web Server</a>.</p>
<hr>
<h2 id="config-page"><a class="header" href="#config-page">Config Page</a></h2>
<p>The <strong>Config Page</strong> is the main page of the web interface, allowing you to manage network and device configuration parameters.</p>
<p><img src="media/browser_config.png" alt="Config Page"></p>
<h3 id="key-parameters"><a class="header" href="#key-parameters">Key Parameters</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Parameter</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>Network SSID</strong></td><td>The external WiFi network name you want to connect to.</td></tr>
<tr><td><strong>Network Password</strong></td><td>The password for the external WiFi network.</td></tr>
<tr><td><strong>Puara Password</strong></td><td>The password for your device’s own WiFi access point.</td></tr>
</tbody>
</table>
</div>
<h3 id="important-notes"><a class="header" href="#important-notes">Important Notes</a></h3>
<ul>
<li>After making changes, click <strong>“Close and Reboot”</strong> to restart the device and apply the changes.</li>
<li>See the <a href="../../data/config.json">config.json</a> file for all available parameters.</li>
</ul>
<h3 id="configjson"><a class="header" href="#configjson"><code>config.json</code></a></h3>
<p>You can modify configuration values directly in the source file, then build and upload the filesystem. The <code>/data/config.json</code> file stores the main configuration of your device:</p>
<pre><code class="language-json">{
    "device": "Puara",
    "id": 1,
    "author": "Edu Meneses",
    "institution": "SAT/IDMIL (2025)",
    "APpasswd": "mappings",
    "wifiSSID": "SSID",
    "wifiPSK": "AP_PASSWORD",
    "persistentAP": 1
}
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>device</code></td><td>User-defined name for the device.</td></tr>
<tr><td><code>id</code></td><td>User-defined device ID (useful when using multiple devices).</td></tr>
<tr><td><code>author</code></td><td>Project author name.</td></tr>
<tr><td><code>institution</code></td><td>Institution or organization name.</td></tr>
<tr><td><code>APpasswd</code></td><td>Password for your device’s WiFi access point.</td></tr>
<tr><td><code>wifiSSID</code></td><td>Name of the external WiFi network to connect to.</td></tr>
<tr><td><code>wifiPSK</code></td><td>Password for the external WiFi network.</td></tr>
<tr><td><code>persistentAP</code></td><td>If <code>1</code> (true), the device always creates its own access point. Set to <code>0</code> to disable and reduce radio interference.</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="scan-page"><a class="header" href="#scan-page">Scan Page</a></h2>
<p>The <strong>Scan Page</strong> displays WiFi networks detected by your device, helping you identify available networks to connect to.</p>
<p><img src="media/browser_scan.png" alt="Scan Page"></p>
<h3 id="features"><a class="header" href="#features">Features</a></h3>
<ul>
<li>View a list of available WiFi networks with signal strength.</li>
<li>Use this information to select a network for the Config Page.</li>
<li>After updating the configuration, reboot the device to apply changes.</li>
</ul>
<hr>
<h2 id="settings-page"><a class="header" href="#settings-page">Settings Page</a></h2>
<p>The <strong>Settings Page</strong> allows you to view and modify custom application variables defined in your project.</p>
<p><img src="media/browser_settings_rndm.png" alt="Settings Page"></p>
<h3 id="features-1"><a class="header" href="#features-1">Features</a></h3>
<ul>
<li><strong>View variables</strong>: See all user-defined settings from <code>settings.json</code>.</li>
<li><strong>Modify values</strong>: Change values directly via the web interface. Changes persist after reboot.</li>
<li><strong>Add/remove fields</strong>: Edit the <a href="../../data/settings.json">settings.json</a> file directly, maintaining the <code>name:value</code> structure, then rebuild and upload the filesystem.</li>
</ul>
<h3 id="accessing-variables-in-code"><a class="header" href="#accessing-variables-in-code">Accessing Variables in Code</a></h3>
<p>Use the following methods to retrieve variable values in your program:</p>
<pre><code class="language-cpp">// For text fields
std::string my_string = puara.getVarText("variable_name");

// For number fields (integers or floats)
int my_int = puara.getVarNumber("variable_name");
float my_float = puara.getVarNumber("variable_name");
</code></pre>
<h3 id="settingsjson"><a class="header" href="#settingsjson"><code>settings.json</code></a></h3>
<p>The <code>/data/settings.json</code> file stores custom application settings as an array of name-value pairs:</p>
<pre><code class="language-json">{
    "settings": [
        {
            "name": "user_defined_text",
            "value": "user defined value"
        },
        {
            "name": "user_defined_variable",
            "value": 42
        },
        {
            "name": "variable3",
            "value": 12.345
        }
    ]
}
</code></pre>
<h3 id="example-osc-settings"><a class="header" href="#example-osc-settings">Example: OSC Settings</a></h3>
<p>For projects using OSC communication, the settings page can be used to configure IP addresses and ports:</p>
<p><img src="media/browser_settings_osc.png" alt="OSC Settings Page"></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="puara-api-documentation"><a class="header" href="#puara-api-documentation">Puara API Documentation</a></h1>
<p>The <code>Puara</code> object is the main entry point for using the <code>puara-module</code> library. It provides a simple interface for managing the different modules of the library, including WiFi, filesystem, web server, and more.</p>
<hr>
<h2 id="initialization"><a class="header" href="#initialization">Initialization</a></h2>
<p>To use the <code>Puara</code> object, you first need to include the <code>puara.h</code> header file and create an instance of the <code>Puara</code> class:</p>
<pre><code class="language-cpp">#include &lt;puara.h&gt;

Puara puara;
</code></pre>
<p>Then, in your <code>setup()</code> function, call the <code>start()</code> method:</p>
<pre><code class="language-cpp">void setup() {
    puara.start();
}
</code></pre>
<p>The <code>start()</code> method initializes the following:</p>
<ul>
<li>Filesystem</li>
<li>Configuration and settings (from the JSON files)</li>
<li>WiFi (in STA-AP, AP or STA mode)</li>
<li>Web server</li>
<li>Serial listening</li>
<li>mDNS service</li>
<li>WiFi network scanning</li>
</ul>
<h2 id="public-methods"><a class="header" href="#public-methods">Public Methods</a></h2>
<h3 id="initialization--core"><a class="header" href="#initialization--core">Initialization &amp; Core</a></h3>
<h4 id="start"><a class="header" href="#start"><code>start()</code></a></h4>
<pre><code class="language-cpp">void start(PuaraAPI::Monitors monitor = PuaraAPI::UART_MONITOR, esp_log_level_t debug_level = ESP_LOG_WARN);
</code></pre>
<p>Initializes the Puara module and all its subsystems. This is the main entry point and should be called in your <code>setup()</code> function.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>monitor</code>: Specifies the serial monitor type. Options are:
<ul>
<li><code>PuaraAPI::UART_MONITOR</code> (default) - Standard UART serial monitor</li>
<li><code>PuaraAPI::JTAG_MONITOR</code> - JTAG-based debugging monitor</li>
<li><code>PuaraAPI::USB_MONITOR</code> - USB serial monitor (not currently functional)</li>
</ul>
</li>
<li><code>debug_level</code>: Sets the ESP-IDF logging level. Default is <code>ESP_LOG_WARN</code>. Other options include <code>ESP_LOG_NONE</code>, <code>ESP_LOG_ERROR</code>, <code>ESP_LOG_INFO</code>, <code>ESP_LOG_DEBUG</code>, <code>ESP_LOG_VERBOSE</code>.</li>
</ul>
<hr>
<h3 id="web-server"><a class="header" href="#web-server">Web Server</a></h3>
<h4 id="start_webserver"><a class="header" href="#start_webserver"><code>start_webserver()</code></a></h4>
<pre><code class="language-cpp">httpd_handle_t start_webserver(void);
</code></pre>
<p>Starts the built-in HTTP web server for device configuration and monitoring.</p>
<p><strong>Returns:</strong> A handle to the HTTP server instance (<code>httpd_handle_t</code>).</p>
<h4 id="stop_webserver"><a class="header" href="#stop_webserver"><code>stop_webserver()</code></a></h4>
<pre><code class="language-cpp">void stop_webserver(void);
</code></pre>
<p>Stops the HTTP web server.</p>
<hr>
<h3 id="device-information"><a class="header" href="#device-information">Device Information</a></h3>
<h4 id="dmi_name"><a class="header" href="#dmi_name"><code>dmi_name()</code></a></h4>
<pre><code class="language-cpp">std::string dmi_name();
</code></pre>
<p>Returns the DMI (Device/Module Identifier) name of the device, which is a combination of the device type and ID.</p>
<p><strong>Returns:</strong> The device’s DMI name as a <code>std::string</code>.</p>
<h4 id="version"><a class="header" href="#version"><code>version()</code></a></h4>
<pre><code class="language-cpp">unsigned int version();
</code></pre>
<p>Returns the current firmware version number.</p>
<p><strong>Returns:</strong> The version as an <code>unsigned int</code>.</p>
<h4 id="set_version"><a class="header" href="#set_version"><code>set_version()</code></a></h4>
<pre><code class="language-cpp">void set_version(unsigned int user_version);
</code></pre>
<p>Sets a custom firmware version number.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>user_version</code>: The version number to set.</li>
</ul>
<hr>
<h3 id="filesystem"><a class="header" href="#filesystem">Filesystem</a></h3>
<h4 id="mount"><a class="header" href="#mount"><code>mount()</code></a></h4>
<pre><code class="language-cpp">void mount();
</code></pre>
<p>Mounts the device’s filesystem (LittleFS or SPIFFS). This is automatically called by <code>start()</code>, but can be used manually if needed.</p>
<h4 id="unmount"><a class="header" href="#unmount"><code>unmount()</code></a></h4>
<pre><code class="language-cpp">void unmount();
</code></pre>
<p>Unmounts the device’s filesystem. Useful before deep sleep or when filesystem access is no longer needed.</p>
<hr>
<h3 id="configuration-management"><a class="header" href="#configuration-management">Configuration Management</a></h3>
<h4 id="read_config_json"><a class="header" href="#read_config_json"><code>read_config_json()</code></a></h4>
<pre><code class="language-cpp">void read_config_json();
</code></pre>
<p>Reads the device configuration from the <code>config.json</code> file stored in the filesystem. This includes device name, ID, author, institution, and WiFi credentials.</p>
<h4 id="write_config_json"><a class="header" href="#write_config_json"><code>write_config_json()</code></a></h4>
<pre><code class="language-cpp">void write_config_json();
</code></pre>
<p>Writes the current device configuration to the <code>config.json</code> file in the filesystem.</p>
<h4 id="read_settings_json"><a class="header" href="#read_settings_json"><code>read_settings_json()</code></a></h4>
<pre><code class="language-cpp">void read_settings_json();
</code></pre>
<p>Reads user-defined settings from the <code>settings.json</code> file stored in the filesystem.</p>
<h4 id="write_settings_json"><a class="header" href="#write_settings_json"><code>write_settings_json()</code></a></h4>
<pre><code class="language-cpp">void write_settings_json();
</code></pre>
<p>Writes the current user-defined settings to the <code>settings.json</code> file in the filesystem.</p>
<h4 id="set_settings_changed_handler"><a class="header" href="#set_settings_changed_handler"><code>set_settings_changed_handler()</code></a></h4>
<pre><code class="language-cpp">void set_settings_changed_handler(std::function&lt;void()&gt;);
</code></pre>
<p>Registers a callback function that will be called whenever settings are modified (e.g., through the web interface).</p>
<p><strong>Parameters:</strong></p>
<ul>
<li>A <code>std::function&lt;void()&gt;</code> callback that takes no arguments and returns nothing.</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="language-cpp">puara.set_settings_changed_handler([]() {
    Serial.println("Settings have been updated!");
    // Reload or apply new settings here
});
</code></pre>
<hr>
<h3 id="serial-communication"><a class="header" href="#serial-communication">Serial Communication</a></h3>
<h4 id="start_serial_listening"><a class="header" href="#start_serial_listening"><code>start_serial_listening()</code></a></h4>
<pre><code class="language-cpp">bool start_serial_listening();
</code></pre>
<p>Starts listening for serial commands. This allows configuration and control via serial terminal.</p>
<p><strong>Returns:</strong> <code>true</code> if serial listening was successfully started, <code>false</code> otherwise.</p>
<h4 id="send_serial_data"><a class="header" href="#send_serial_data"><code>send_serial_data()</code></a></h4>
<pre><code class="language-cpp">void send_serial_data(std::string data);
</code></pre>
<p>Sends data through the serial interface.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>data</code>: The string data to send.</li>
</ul>
<hr>
<h3 id="mdns-service"><a class="header" href="#mdns-service">mDNS Service</a></h3>
<h4 id="start_mdns_service"><a class="header" href="#start_mdns_service"><code>start_mdns_service()</code></a></h4>
<pre><code class="language-cpp">void start_mdns_service(std::string_view device_name, std::string_view instance_name);
</code></pre>
<p>Starts the mDNS (multicast DNS) service, allowing the device to be discovered on the local network by its hostname.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>device_name</code>: The hostname for mDNS discovery (e.g., “puara-device”).</li>
<li><code>instance_name</code>: A human-readable instance name for the service.</li>
</ul>
<hr>
<h3 id="wifi-management"><a class="header" href="#wifi-management">WiFi Management</a></h3>
<h4 id="start_wifi"><a class="header" href="#start_wifi"><code>start_wifi()</code></a></h4>
<pre><code class="language-cpp">void start_wifi();
</code></pre>
<p>Starts the WiFi subsystem based on the configuration. The device can operate in:</p>
<ul>
<li><strong>STA mode</strong>: Connects to an existing WiFi network</li>
<li><strong>AP mode</strong>: Creates its own access point</li>
<li><strong>STA-AP mode</strong>: Both simultaneously</li>
</ul>
<h4 id="wifi_scan"><a class="header" href="#wifi_scan"><code>wifi_scan()</code></a></h4>
<pre><code class="language-cpp">void wifi_scan(void);
</code></pre>
<p>Initiates a scan for available WiFi networks. Results can be viewed through the web interface.</p>
<h4 id="get_staisconnected"><a class="header" href="#get_staisconnected"><code>get_StaIsConnected()</code></a></h4>
<pre><code class="language-cpp">bool get_StaIsConnected();
</code></pre>
<p>Checks if the device is connected to a WiFi network in station (STA) mode.</p>
<p><strong>Returns:</strong> <code>true</code> if connected to a WiFi access point, <code>false</code> otherwise.</p>
<h4 id="staip"><a class="header" href="#staip"><code>staIP()</code></a></h4>
<pre><code class="language-cpp">std::string staIP();
</code></pre>
<p>Returns the device’s IP address when connected to an external WiFi access point.</p>
<p><strong>Returns:</strong> The IP address as a <code>std::string</code> (e.g., “192.168.1.100”).</p>
<hr>
<h3 id="variable-access"><a class="header" href="#variable-access">Variable Access</a></h3>
<h4 id="getvarnumber"><a class="header" href="#getvarnumber"><code>getVarNumber()</code></a></h4>
<pre><code class="language-cpp">double getVarNumber(std::string varName);
</code></pre>
<p>Retrieves the value of a numeric setting variable by name from the settings.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>varName</code>: The name of the variable to retrieve.</li>
</ul>
<p><strong>Returns:</strong> The value of the variable as a <code>double</code>.</p>
<h4 id="getvartext"><a class="header" href="#getvartext"><code>getVarText()</code></a></h4>
<pre><code class="language-cpp">std::string getVarText(std::string varName);
</code></pre>
<p>Retrieves the value of a text setting variable by name from the settings.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>varName</code>: The name of the variable to retrieve.</li>
</ul>
<p><strong>Returns:</strong> The value of the variable as a <code>std::string</code>.</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="filesystem-1"><a class="header" href="#filesystem-1">Filesystem</a></h1>
<p>The <code>puara-module</code> library provides a simple interface for working with the filesystem. It supports both <strong>LittleFS</strong> (default) and <strong>SPIFFS</strong>, though the available options depend on your development environment.</p>
<hr>
<h2 id="mounting-the-filesystem"><a class="header" href="#mounting-the-filesystem">Mounting the Filesystem</a></h2>
<p>The filesystem is mounted automatically when you call the <code>puara.start()</code> method. You can also mount and unmount it manually using the <code>mount()</code> and <code>unmount()</code> methods:</p>
<pre><code class="language-cpp">puara.mount();
puara.unmount();
</code></pre>
<hr>
<h2 id="reading-and-writing-files"><a class="header" href="#reading-and-writing-files">Reading and Writing Files</a></h2>
<p>You can read and write configuration files using the following methods:</p>
<ul>
<li><code>read_config_json()</code> / <code>write_config_json()</code> - Manage the <code>config.json</code> file (device configuration)</li>
<li><code>read_settings_json()</code> / <code>write_settings_json()</code> - Manage the <code>settings.json</code> file (user settings)</li>
</ul>
<p>For working with other files, you can use the standard <code>LittleFS</code> or <code>SPIFFS</code> APIs directly.</p>
<hr>
<h2 id="littlefs-vs-spiffs"><a class="header" href="#littlefs-vs-spiffs">LittleFS vs SPIFFS</a></h2>
<p>By default, the <code>puara-module</code> library uses <strong>LittleFS</strong>, which offers better performance and wear leveling compared to SPIFFS.</p>
<h3 id="arduino-ide"><a class="header" href="#arduino-ide">Arduino IDE</a></h3>
<p>When using the <strong>Arduino IDE</strong>, only <strong>LittleFS</strong> is supported. You must use the <a href="https://github.com/earlephilhower/arduino-littlefs-upload">arduino-littlefs uploader tool</a> to upload the filesystem data to your device.</p>
<h3 id="platformio"><a class="header" href="#platformio">PlatformIO</a></h3>
<p>When using <strong>PlatformIO</strong>, you have the flexibility to choose between LittleFS (default) and SPIFFS.</p>
<h4 id="default-configuration-littlefs"><a class="header" href="#default-configuration-littlefs">Default Configuration (LittleFS)</a></h4>
<p>By default, PlatformIO projects are configured to use LittleFS. No changes are required.</p>
<h4 id="switching-to-spiffs"><a class="header" href="#switching-to-spiffs">Switching to SPIFFS</a></h4>
<p>To use SPIFFS instead of LittleFS, you need to modify two settings in your <code>platformio.ini</code> file:</p>
<p><strong>1. Change the filesystem type:</strong></p>
<pre><code class="language-ini">; to use spiffs, comment out "board_build.filesystem = littlefs", 
; uncomment "board_build.filesystem = spiffs" and "-DPUARA_SPIFFS"
;board_build.filesystem = littlefs
board_build.filesystem = spiffs
</code></pre>
<p><strong>2. Add the SPIFFS build flag:</strong></p>
<pre><code class="language-ini">build_flags =
    -DBOARD_HAS_PSRAM
    -DPUARA_SPIFFS    ; compilation flag to indicate the usage of spiffs lib instead of littlefs
</code></pre>
<blockquote>
<p><strong>Note:</strong> Make sure both settings are changed together. The <code>board_build.filesystem</code> setting determines how PlatformIO uploads the filesystem data, while the <code>-DPUARA_SPIFFS</code> build flag tells the puara-module library to use the SPIFFS API at compile time.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="web-server-1"><a class="header" href="#web-server-1">Web Server</a></h1>
<p>The <code>puara-module</code> library includes an integrated web server that allows you to configure your device from a web browser. For more details on the browser pages from a user perspective, see <a href="#browser-pages">Browser Pages</a>.</p>
<hr>
<h2 id="starting-the-web-server"><a class="header" href="#starting-the-web-server">Starting the Web Server</a></h2>
<p>The web server is started automatically when you call the <code>puara.start()</code> method. You can also start and stop it manually:</p>
<pre><code class="language-cpp">httpd_handle_t server = puara.start_webserver();
puara.stop_webserver();
</code></pre>
<hr>
<h2 id="accessing-the-web-interface"><a class="header" href="#accessing-the-web-interface">Accessing the Web Interface</a></h2>
<p>Once the web server is running, you can access it in two ways:</p>
<ol>
<li>
<p><strong>Via IP Address</strong>: Navigate to the device’s IP address in your web browser (e.g., <code>http://192.168.4.1</code> for AP mode, or the assigned IP in STA mode which can be retrieved using <code>puara.staIP()</code>).</p>
</li>
<li>
<p><strong>Via mDNS Hostname</strong>: If mDNS is enabled, you can access the device using its hostname (e.g., <code>http://your-device-name.local</code>).</p>
</li>
</ol>
<hr>
<h2 id="web-pages"><a class="header" href="#web-pages">Web Pages</a></h2>
<p>The web pages are stored in the <code>data</code> directory of your project. The <code>puara-module</code> library provides a set of default web pages that you can customize to suit your needs.</p>
<h3 id="default-pages"><a class="header" href="#default-pages">Default Pages</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>File</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>index.html</code></td><td>The main page of the web interface where users can configure WiFi SSID and device settings.</td></tr>
<tr><td><code>scan.html</code></td><td>Displays available WiFi networks for connection.</td></tr>
<tr><td><code>settings.html</code></td><td>Allows users to configure custom variable values for the device.</td></tr>
<tr><td><code>update.html</code></td><td>Reserved for future Over-The-Air (OTA) update functionality.</td></tr>
<tr><td><code>reboot.html</code></td><td>Confirmation page displayed when the device is rebooting.</td></tr>
<tr><td><code>saved.html</code></td><td>Confirmation page displayed after settings are saved. This triggers the callback registered via <code>puara.set_settings_changed_handler()</code>.</td></tr>
</tbody>
</table>
</div>
<h3 id="styling"><a class="header" href="#styling">Styling</a></h3>
<p>The <code>style.css</code> file in the <code>data</code> directory controls the appearance of all web pages. You can modify this file to customize the look and feel of the web interface.</p>
<hr>
<h2 id="customizing-web-pages"><a class="header" href="#customizing-web-pages">Customizing Web Pages</a></h2>
<p>You can edit the HTML files in the <code>data</code> directory to change the appearance and functionality of the web interface. The web pages use a simple template system that allows you to insert dynamic values from your device into the HTML.</p>
<blockquote>
<p><strong>Note:</strong> After modifying files in the <code>data</code> directory, you need to re-upload the filesystem to your device. See <a href="#filesystem-1">Filesystem</a> for instructions on uploading filesystem data.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="wifi-considerations"><a class="header" href="#wifi-considerations">WiFi Considerations</a></h1>
<p>The <code>puara-module</code> library provides a simple and flexible interface for managing WiFi connections. This document outlines the key WiFi-related features, modes, and public API functions available in the library.</p>
<h2 id="wifi-modes"><a class="header" href="#wifi-modes">WiFi Modes</a></h2>
<p>The <code>puara-module</code> supports three modes of operation:</p>
<ol>
<li>
<p><strong>Station - Access Point (STA-AP) Mode</strong>:</p>
<ul>
<li>The device connects to an existing WiFi network (station).</li>
<li>The device creates its own WiFi network (access point).</li>
</ul>
</li>
<li>
<p><strong>Access Point (AP) Mode</strong>:</p>
<ul>
<li>
<p>The device does not connect to an existing WiFi network.</p>
</li>
<li>
<p>The device creates its own WiFi network (access point).</p>
</li>
<li>
<p>Useful for initial configuration or when no external WiFi network is available.</p>
</li>
</ul>
</li>
<li>
<p><strong>Station (STA) Mode</strong>:</p>
<ul>
<li>The device connects to an existing WiFi network.</li>
<li>The Access Point is turned off with <code>persistent_AP=0</code></li>
<li>Useful to limit WiFi pollution and secure the device.</li>
</ul>
</li>
</ol>
<h3 id="default-behavior"><a class="header" href="#default-behavior">Default Behavior</a></h3>
<p>Device is STA-AP by default:</p>
<ul>
<li>The <code>puara-module</code> will attempt to connect to a known WiFi network. If the connection succeeds or fails, the device will then activate it’s AP mode.</li>
</ul>
<p>To deactivate STA, leave useless connection information (SSID, PSK) in <code>config.json</code>.
To deactivate AP mode, set the <code>persistent_AP</code> option to <code>0</code> in the <code>config.json</code> file or access the config page through the web server and tick the proper option about AP mode.</p>
<hr>
<h2 id="public-api-functions"><a class="header" href="#public-api-functions">Public API Functions</a></h2>
<p>The <code>puara-module</code> exposes the following public API functions for managing WiFi:</p>
<h3 id="void-start_wifi"><a class="header" href="#void-start_wifi"><code>void start_wifi()</code></a></h3>
<ul>
<li>
<p><strong>Description</strong>: Initializes the WiFi configuration and starts the WiFi service.</p>
</li>
<li>
<p><strong>Behavior</strong>:</p>
<ul>
<li>Configures the device to operate in either STA-AP, STA or AP mode based on the <code>config.json</code> settings.</li>
<li>Ensures default values for SSID and passwords if they are missing or invalid.</li>
</ul>
<h3 id="void-wifi_scan"><a class="header" href="#void-wifi_scan"><code>void wifi_scan()</code></a></h3>
</li>
<li>
<p><strong>Description</strong>: Scans for available WiFi networks and stores the results.</p>
</li>
<li>
<p><strong>Behavior</strong>:</p>
<ul>
<li>The scan results include SSID, RSSI (signal strength), and channel information for each network.</li>
<li>Results are displayed on the scan.html page of the web interface.</li>
</ul>
</li>
</ul>
<h3 id="bool-get_staisconnected"><a class="header" href="#bool-get_staisconnected"><code>bool get_StaIsConnected()</code></a></h3>
<ul>
<li><strong>Description</strong>: Checks whether the device is connected to an external WiFi network in STA mode.</li>
<li><strong>Returns</strong>: Returns true if the device is connected, false otherwise.</li>
</ul>
<h3 id="stdstring-staip"><a class="header" href="#stdstring-staip"><code>std::string staIP()</code></a></h3>
<ul>
<li>
<p><strong>Description</strong>: Retrieves the current IP address of the device when connected to an external WiFi network in STA-IP or STA modes.</p>
</li>
<li>
<p><strong>Returns</strong>: The IP address as a string.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="serial-and-debug-logging"><a class="header" href="#serial-and-debug-logging">Serial and Debug Logging</a></h1>
<p>The <code>puara-module</code> library provides a simple interface for serial communication, allowing you to send data and receive commands via the serial port.</p>
<hr>
<h2 id="starting-serial-listening"><a class="header" href="#starting-serial-listening">Starting Serial Listening</a></h2>
<p>Serial listening is started automatically when you call <code>puara.start()</code>. You can also start it manually:</p>
<pre><code class="language-cpp">bool success = puara.start_serial_listening();
</code></pre>
<p><strong>Returns:</strong> <code>true</code> if serial listening was successfully started, <code>false</code> otherwise.</p>
<p>When serial listening is active, the device will listen for incoming commands on the serial port, allowing you to interact with and configure the device via a serial terminal.</p>
<hr>
<h2 id="sending-serial-data"><a class="header" href="#sending-serial-data">Sending Serial Data</a></h2>
<p>You can send data over the serial port using the <code>send_serial_data()</code> method:</p>
<pre><code class="language-cpp">puara.send_serial_data("Hello, world!");
</code></pre>
<hr>
<h2 id="monitor-types"><a class="header" href="#monitor-types">Monitor Types</a></h2>
<p>You can specify the serial monitor type when calling the <code>start()</code> method:</p>
<pre><code class="language-cpp">// Use JTAG monitor with debug-level logging
puara.start(PuaraAPI::JTAG_MONITOR, ESP_LOG_DEBUG);
</code></pre>
<h3 id="available-monitors"><a class="header" href="#available-monitors">Available Monitors</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Monitor</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>PuaraAPI::UART_MONITOR</code></td><td>Standard UART serial monitor (default).</td></tr>
<tr><td><code>PuaraAPI::JTAG_MONITOR</code></td><td>JTAG-based debugging monitor.</td></tr>
<tr><td><code>PuaraAPI::USB_MONITOR</code></td><td>USB serial monitor.</td></tr>
</tbody>
</table>
</div>
<h3 id="debug-levels"><a class="header" href="#debug-levels">Debug Levels</a></h3>
<p>The second parameter of <code>start()</code> sets the ESP-IDF logging level:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Level</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>ESP_LOG_NONE</code></td><td>No logging output.</td></tr>
<tr><td><code>ESP_LOG_ERROR</code></td><td>Only error messages.</td></tr>
<tr><td><code>ESP_LOG_WARN</code></td><td>Warnings and errors (default).</td></tr>
<tr><td><code>ESP_LOG_INFO</code></td><td>Informational messages, warnings, and errors.</td></tr>
<tr><td><code>ESP_LOG_DEBUG</code></td><td>Debug messages and all above.</td></tr>
<tr><td><code>ESP_LOG_VERBOSE</code></td><td>All messages including verbose output.</td></tr>
</tbody>
</table>
</div>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="mdns"><a class="header" href="#mdns">mDNS</a></h1>
<p>The <code>puara-module</code> library includes built-in support for <strong>mDNS</strong> (multicast DNS), allowing your device to be discovered and accessed on the local network using a human-readable hostname instead of an IP address.</p>
<hr>
<h2 id="what-is-mdns"><a class="header" href="#what-is-mdns">What is mDNS?</a></h2>
<p>mDNS is a protocol that resolves hostnames to IP addresses within small networks without requiring a dedicated DNS server. It enables you to access your device using a <code>.local</code> domain name, making it much easier to connect to your device without needing to know its IP address.</p>
<hr>
<h2 id="automatic-configuration"><a class="header" href="#automatic-configuration">Automatic Configuration</a></h2>
<p>When you call <code>puara.start()</code>, the mDNS service is started automatically using the device’s <strong>DMI name</strong> (a combination of <code>device</code> and <code>id</code> from your <code>config.json</code>).</p>
<p>For example, with this configuration:</p>
<pre><code class="language-json">{
    "device": "Puara",
    "id": 1
}
</code></pre>
<p>The device will be accessible at: <strong><code>http://puara_001.local/</code></strong></p>
<hr>
<h2 id="manual-configuration"><a class="header" href="#manual-configuration">Manual Configuration</a></h2>
<p>If you need to start the mDNS service manually with a custom name, use the <code>start_mdns_service()</code> method:</p>
<pre><code class="language-cpp">puara.start_mdns_service("my-device", "My Device Instance");
</code></pre>
<h3 id="parameters"><a class="header" href="#parameters">Parameters</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Parameter</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>device_name</code></td><td>The hostname for mDNS discovery. This becomes the <code>.local</code> address (e.g., <code>my-device</code> → <code>http://my-device.local/</code>).</td></tr>
<tr><td><code>instance_name</code></td><td>A human-readable name for the service instance, visible in network discovery tools.</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="accessing-your-device"><a class="header" href="#accessing-your-device">Accessing Your Device</a></h2>
<p>Once mDNS is running, you can access your device’s web interface by typing the hostname followed by <code>.local</code> in your browser:</p>
<pre><code>http://&lt;device_name&gt;.local/
</code></pre>
<p>For example:</p>
<ul>
<li><code>http://puara_001.local/</code></li>
<li><code>http://my-sensor.local/</code></li>
</ul>
<hr>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="device-not-found-via-local-address"><a class="header" href="#device-not-found-via-local-address">Device not found via <code>.local</code> address?</a></h3>
<ul>
<li><strong>Same network</strong>: Ensure your computer and the device are on the same network.</li>
<li><strong>mDNS support</strong>: Some networks (especially corporate/enterprise) block mDNS traffic. Try using the IP address directly instead.</li>
<li><strong>Windows</strong>: Older Windows versions may require <a href="https://support.apple.com/bonjour">Bonjour</a> to be installed for <code>.local</code> resolution.</li>
<li><strong>Firewall</strong>: Check that your firewall allows mDNS traffic (UDP port 5353).</li>
</ul>
<blockquote>
<p><strong>Tip:</strong> If you’re having trouble with mDNS, you can always access the device via its IP address. Use <code>puara.staIP()</code> to retrieve the IP address in your code, or check your router’s connected devices list.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-3550ef20.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
